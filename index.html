<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Swim博客 by loftyk</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Swim博客</h1>
      <h2 class="project-tagline">Java实现1~100奇数偶数交替打印</h2>
      <a href="https://github.com/loftyk/swim.github.io" class="btn">View on GitHub</a>
      <a href="https://github.com/loftyk/swim.github.io/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/loftyk/swim.github.io/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <pre><code>  这是博主最近看到一道题目，如何用两个线程实现1~100奇数偶数交替打印。刚开始拿到这道题目的时候，还在考虑是不是直接用if判断求余就可以实现。但是仔细想想，如何才能保证奇偶数交替打印，当时很蒙圈。然后又与面试官沟通交流，才明白这道题的真正意思，面试官的意思是如何保证这1~100个数用两个线程实现交替打印出来。然后仔细想想，这就是一道考察并发锁的问题，用到锁首先我们需要考虑到synchronized和可重入锁ReentrantLock,交替打印是这道题的关键，如何保证线程1和线程2互斥，线程1执行完后线程2执行？  不多说，直接上代码：
</code></pre>
<p>package com.swim.JiOuNum;</p>
<p>import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;</p>
<p>/**
*</p>
<ul>
<li>
<p>1~100奇数偶数交替打印</p>
</li>
<li>
<p>.Tiltle: com.swim.JiOuNum</p>   .
</li>
<li>
<p> Description:</p>
</li>
<li>
<li>
<p><a href="https://github.com/author" class="user-mention">@author</a> swim .</p>
</li>
<li>
<p><a href="https://github.com/date" class="user-mention">@date</a> 2018/6/21 15:12
*/
public class TwoThread {</p>
<p>private int start=1;
/**</p>
<ul>
<li>保证内存可见性</li>
<li>其实用锁了之后也可以保证可见性 这里用不用 volatile 都一样
*/
private volatile  boolean flag=false;//先打印基数再打印偶数   false 打印基数 true打印偶数</li>
</ul>
<p>private final static Lock lock=new ReentrantLock();</p>
<p>public static class  OuNum implements Runnable{
private TwoThread number;</p>
<pre><code> public OuNum(TwoThread number) {
    this.number=number;
 }

 public void run() {
     while(number.start&lt;=100){
         if (number.flag){
             try {
                 lock.lock();
                 System.out.println(Thread.currentThread().getName()+"====&gt;"+number.start);
                 number.start++;
                 number.flag=false;
             }finally {
                 lock.unlock();
             }
         }else{
             try {
                 Thread.sleep(10);
             }catch (InterruptedException e){
                 e.printStackTrace();
             }
         }
     }
 }
</code></pre>
<p>}</p>
<p>public static  class JiNum implements Runnable{
private TwoThread number;
public JiNum(TwoThread number){
this.number=number;
}
public void run() {
while(number.start&lt;=100){
if (!number.flag){
try {
lock.lock();
System.out.println(Thread.currentThread().getName()+"====&gt;"+number.start);
number.start++;
number.flag=true;
}finally {
lock.unlock();
}
}else {
try {
Thread.sleep(10);
}catch (InterruptedException e){
e.printStackTrace();
}
}
}</p>
<pre><code> }
</code></pre>
<p>}</p>
<p>public static void main(String[] args){
TwoThread twoThread=new TwoThread();
Thread t1=new Thread(new JiNum(twoThread));
Thread t2=new Thread(new OuNum(twoThread));
t1.setName("基数线程a");
t2.setName("偶数线程b");
t1.start();
t2.start();
}
}</p>
</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/loftyk/swim.github.io">Swim博客</a> is maintained by <a href="https://github.com/loftyk">loftyk</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
